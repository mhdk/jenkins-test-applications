pipeline 
{
    agent
    {
      label 'docker-dotnetcore'
    }

    stages
    {
        stage('SCM')
        {
            steps
            {
                // Get some code from a GitHub repository
                git 'https://github.com/whayward-stfc/jenkins-test-applications/Console_App_DNC'
            }
        }
        stage('Build')
        {
            steps
            {
                script
                {
                    try
                    {
                        sh 'dotnet build ConsoleApp1'
                    }
                    finally
                    {
                        archiveArtifacts artifacts: 'ConsoleApp1/*.*'
                    }
                }
            }
        }
    	stage('Test')
        {
    		steps
            {
                echo 'Execute unit tests'
            }
    	}
    	stage('Package')
        {
    		steps
            {
                echo 'Zip it up'
            }
    	}
    	stage('Deploy')
        {
    		steps
            {
                echo 'Push to deployment'
            }
    	}
    	stage('Archive')
        {
    		steps
            {
                archiveArtifacts artifacts: 'ConsoleApp1/*.*'
            }
    	}        
    }
}